<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
</head>
<body>

    {% include "partials/navbar.html" %}

    
</body>
</html>{% load static tailwind_tags %} {% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIET PMU - Projects</title>
    {% tailwind_css %}
</head>
<body class="bg-gray-100 font-sans">
    <div class="flex h-screen">
        
        <div class="max-w-4xl mx-auto p-6">
            <!-- Step Navigation -->
            <div class="flex justify-between items-center mb-8">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600">1</div>
                        <span class="ml-2 text-gray-600">Program</span>
                    </div>
                    <span class="text-gray-400">></span>
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600">2</div>
                        <span class="ml-2 text-gray-600">KPI</span>
                    </div>
                    <span class="text-gray-400">></span>
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600">3</div>
                        <span class="ml-2 text-gray-600">Workshops</span>
                    </div>
                    <span class="text-gray-400">></span>
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600">4</div>
                        <span class="ml-2 text-gray-600">Review Meetings</span>
                    </div>
                    <span class="text-gray-400">></span>
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600">5</div>
                        <span class="ml-2 text-gray-600">Manpower</span>
                    </div>
                </div>
            </div>

            <!-- Form Steps -->
            <div id="form-step-1" class="step">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Program Details</h2>
                <div class="mb-4">
                    {% comment %} <label class="block text-gray-700 mb-2">Program Type</label>
                    <select id="program-type" class="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200" required>
                        <option value="">Select Program Type</option>
                        <option value="PAC">PAC</option>
                        <option value="PAB">PAB</option>
                        <option value="Others">Others</option>
                    </select>
                    <span class="error-message text-red-500 text-sm hidden">Please select a program type</span> {% endcomment %}

                    <h2 class="text-xl font-semibold text-gray-800 mb-4">My Assigned Programs</h2>
            {% if programs %}
                <div class="space-y-4">
                    {% for program in programs %}
                        <div class="p-4 border rounded-lg bg-gray-50">
                            <p><strong>Program Type:</strong> {{ program.type }}</p>
                            <p><strong>Program Title:</strong> {{ program.title }}</p>
                            <p><strong>Budget:</strong> â‚¹{{ program.annual_budget.amount }}</p>
                            <p><strong>Created At:</strong> {{ program.created_at|date:"d M Y" }}</p>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-gray-600">No programs assigned to you.</p>
            {% endif %}
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">Program Title</label>
                    <input type="text" id="program-title" class="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200" required>
                    <span class="error-message text-red-500 text-sm hidden">Please enter a program title</span>
                </div>
                <div class="mt-6 flex justify-end">
                    <button id="next-1" class="px-4 py-2 bg-purple-600 text-white rounded-lg disabled:opacity-50" disabled>Next</button>
                </div>
            </div>

            <div id="form-step-2" class="step hidden">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">KPI Details</h2>
                <p class="text-gray-600 mb-6">Enter KPI Information.</p>
                <div class="space-y-4">
                    <div>
                        <input type="text" id="kpi-name" placeholder="KPI Name" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter KPI name</span>
                    </div>
                    <div>
                        <input type="date" id="workshop-date" placeholder="Workshop Date" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please select date</span>
                    </div>
                    <div>
                        <input type="number" id="kpi-target" placeholder="Budget" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter KPI budget</span>
                    </div>
                </div>
                <div class="mt-6 flex justify-between">
                    <button id="prev-2" class="px-4 py-2 bg-gray-200 rounded-lg">Previous</button>
                    <button id="next-2" class="px-4 py-2 bg-purple-600 text-white rounded-lg disabled:opacity-50" disabled>Next</button>
                </div>
            </div>

            <div id="form-step-3" class="step hidden">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Workshop Details</h2>
                <p class="text-gray-600 mb-6">Enter Workshop Information.</p>
                <div class="space-y-4">
                    <div>
                        <input type="text" id="workshop-title" placeholder="Workshop Title" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter workshop title</span>
                    </div>
                    <div>
                        <input type="date" id="workshop-date" placeholder="Workshop Date" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please select workshop date</span>
                    </div>
                    <div>
                        <input type="number" id="kpi-target" placeholder="Budget" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter workshop budget</span>
                    </div>
                </div>
                <div class="mt-6 flex justify-between">
                    <button id="prev-3" class="px-4 py-2 bg-gray-200 rounded-lg">Previous</button>
                    <button id="next-3" class="px-4 py-2 bg-purple-600 text-white rounded-lg disabled:opacity-50" disabled>Next</button>
                </div>
            </div>

            <div id="form-step-4" class="step hidden">
                <h2 validated="text-xl font-semibold text-gray-800 mb-4">Review Meeting Details</h2>
                <p class="text-gray-600 mb-6">Enter Review Meeting Information.</p>
                <div class="space-y-4">
                    <div>
                        <input type="text" id="meeting-title" placeholder="Meeting Title" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter meeting title</span>
                    </div>
                    <div>
                        <input type="date" id="meeting-date" placeholder="Meeting Date" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please select meeting date</span>
                    </div>
                     <div>
                        <input type="number" id="kpi-target" placeholder="Budget" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter meeting budget</span>
                    </div>
                </div>
                <div class="mt-6 flex justify-between">
                    <button id="prev-4" class="px-4 py-2 bg-gray-200 rounded-lg">Previous</button>
                    <button id="next-4" class="px-4 py-2 bg-purple-600 text-white rounded-lg disabled:opacity-50" disabled>Next</button>
                </div>
            </div>

            <div id="form-step-4" class="step hidden">
                <h2 validated="text-xl font-semibold text-gray-800 mb-4">Manpower Details</h2>
                <p class="text-gray-600 mb-6">Enter Manpower Information.</p>
                <div class="space-y-4">
                    <div>
                        <input type="text" id="meeting-title" placeholder="number of people" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter title</span>
                    </div>
                    <div>
                        <input type="date" id="meeting-date" placeholder="Meeting Date" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please select date</span>
                    </div>
                     <div>
                        <input type="number" id="kpi-target" placeholder="Budget" class="w-full p-2 border rounded-lg" required>
                        <span class="error-message text-red-500 text-sm hidden">Please enter Manpower budget</span>
                    </div>
                </div>
                <div class="mt-6 flex justify-between">
                    <button id="prev-4" class="px-4 py-2 bg-gray-200 rounded-lg">Previous</button>
                    {% comment %} <button id="next-5" class="px-4 py-2 bg-purple-600 text-white rounded-lg disabled:opacity-50" disabled>Next</button> {% endcomment %}
                    <button id="submit" class="px-4 py-2 bg-purple-600 text-white rounded-lg">Submit</button>
                </div>
            </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const steps = document.querySelectorAll('.step');
            const nextButtons = document.querySelectorAll('[id^="next-"]');
            const prevButtons = document.querySelectorAll('[id^="prev-"]');
            const submitButton = document.getElementById('submit');
            let currentStep = 1;
            const formData = {};

            function validateStep(step) {
                const inputs = steps[step - 1].querySelectorAll('input, select');
                let isValid = true;
                inputs.forEach(input => {
                    const errorMessage = input.nextElementSibling;
                    if (!input.value.trim() || (input.tagName === 'SELECT' && input.value === '')) {
                        isValid = false;
                        errorMessage.classList.remove('hidden');
                        input.classList.add('border-red-500');
                    } else {
                        errorMessage.classList.add('hidden');
                        input.classList.remove('border-red-500');
                        formData[input.id] = input.value;
                    }
                });
                const nextButton = document.getElementById(`next-${step}`);
                if (nextButton) nextButton.disabled = !isValid;
                return isValid;
            }

            function updateReviewStep() {
                document.getElementById('review-program-type').textContent = formData['program-type'] || '';
                document.getElementById('review-program-title').textContent = formData['program-title'] || '';
                document.getElementById('review-kpi-name').textContent = formData['kpi-name'] || '';
                document.getElementById('review-kpi-target').textContent = formData['kpi-target'] || '';
                document.getElementById('review-workshop-title').textContent = formData['workshop-title'] || '';
                document.getElementById('review-workshop-date').textContent = formData['workshop-date'] || '';
                document.getElementById('review-meeting-title').textContent = formData['meeting-title'] || '';
                document.getElementById('review-meeting-date').textContent = formData['meeting-date'] || '';
            }

            steps.forEach(step => {
                const inputs = step.querySelectorAll('input, select');
                inputs.forEach(input => {
                    input.addEventListener('input', () => validateStep(currentStep));
                });
            });

            nextButtons.forEach(button => {
                button.addEventListener('click', () => {
                    if (validateStep(currentStep)) {
                        steps[currentStep - 1].classList.add('hidden');
                        currentStep++;
                        steps[currentStep - 1].classList.remove('hidden');
                        if (currentStep === 5) updateReviewStep();
                        validateStep(currentStep);
                    }
                });
            });

            prevButtons.forEach(button => {
                button.addEventListener('click', () => {
                    steps[currentStep - 1].classList.add('hidden');
                    currentStep--;
                    steps[currentStep - 1].classList.remove('hidden');
                    validateStep(currentStep);
                });
            });

            submitButton.addEventListener('click', () => {
                alert('Form submitted successfully!\n' + JSON.stringify(formData, null, 2));
            });

            // Initial validation for step 1
            validateStep(1);
        });
    </script>
</body>
</html>